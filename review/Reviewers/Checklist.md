# 代码评审应该关注什么？

## 功能性

+ 开发者在这个变更中想做什么？（这里”用户“是指受变更影响到的实际用户，和将来会使用到这些代码的开发者) 重要的是，我们希望开发者能充分测试代码，以确保代码在代码评审期间正常运行。站在用户的角度，确保你正在看的代码没有bug。  
你可以验证变更，尤其是在有面向用户的影响时，评审者应该仔细检查整个变更。有时候单纯看代码很难理解这个变更如何影响到用户，这种情况下如果你不方便自己在MR中打补丁并亲自尝试，你可以让开发者为你提供一个功能性的示例。
+ 确保功能对比原型无遗漏
+ 不应存在分支/场景/需求错漏
  
## 设计

+ 代码评审中最重要的一个点就是把握住变更中的整体设计。评审此次变更设计的影响范围及会不会影响到其他功能？现在是否是添加整个功能的恰当时间？
+ 配置、接口类的设计问题（合理性、友好性)？错误、重复的 API 调用或者封装？
+ 函数与模块拆分是合理的？

## 复杂性

+ 变更是否比预期的更复杂？检测变更的每个级别，是否个别行太复杂？功能是否太复杂？类是否太复杂？”复杂“意味着代码阅读者很难快速理解代码，也可意味着开发者尝试调用或修改此代码时可能会引入bug。
+ 一个典型的复杂性问题就是 过度设计，当开发者让代码变得更通用，或者增加了许多当前不需要的功能时，评审者应该额外注意是否过度设计。鼓励开发者解决现在遇到的问题，而不是揣测未来可能遇到的问题。未来的问题应当在遇到时解决，到那个时候你才能看到问题本质和实际需求。
+ 不应存在应使用公共组件确造轮子的情况
  
## 单元测试

+ 代码有适当的单元测试，测试逻辑设计良好
+ 核心模块单测通过率100%

## 命名

+ 开发人员是否使用了良好的命名方式？好的命名要能够充分表达一个项（变量、类名等）是什么或者用来做什么，但是又易读。
+ 各类命名是易读的，函数命名语义化，且清晰无歧义

## 风格

+ lint通过率100% & lint 忽略项是合理的
+ 主流语言遵循数栈编码风格指南 ，确保变更遵循了这些风格规范
+ 开发人员不应该将风格变更与其他变更放在一起，会降低变更设计评审效率

## 注释

+ 注释清晰明了实用，通常解释清楚了为什么这么做，而不是做了啥
+ 注释是清晰，完善且与代码相符的

## 代码细节

+ 不应存在测试用途代码
+ 不应存在不必要的第三方库引用
+ 不应存在明显的安全漏洞(XSS/CSRF/SQL注入)
+ 本次**MR**的TODO/TOFIX处理完毕

## 评审效率

+ **MR**的说明是清晰且完善并完整交代改动背景, 上下文的
+ 被评审规模控制在3次提交内，不超过200行修改
  
下一篇：[代码评审的步骤](navigate.md)
